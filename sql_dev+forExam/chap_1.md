## 과목1. 데이터 모델링의 이해

### 1. 데이터 모델링의 이해

#### 발생시점에 따른 엔터티 분류
- 기본 키엔터티
- 중심 엔터티
- 행위 엔터티

#### 데이터모델링이란
- 개념
  - 정보 시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
  - 현실세계의 데이터(WHAT)에 대해 약속된 표기법에 의해 표현하는 과정
  - 데이터베이스를 구축하기 위한 분석/설계의 과정

- 데이터 모델링 유의점
  - 중복Duplication
  - 비유연성Inflexibility
  - 비일관성Inconsistency

- 데이터 모델링 종류
  - `개념적 데이터 모델링`
  추상화 수준이 높고 업무중심적이고 포괄적인 수준의 모델링 진행. 전사적 데이터 모델링, EA수립시 많이 이용.

  - `논리적 데이터 모델링`
  시스템으로 구축하고자 하는 업무에 대해 Key, 속성, 관계 등을 정확하게 표현, 재사용성이 높음.

  - `물리적 데이터 모델링`
  실제로 데이터베이스에 이식할 수 있도록 성능, 저장 등 물리적인 성격을 고려하여 설계.

#### 데이터베이스 스키마 구조 3단계
- 외부스키마
- 개념스키마
- 내부스키마

#### ERD 작성 순서
- 엔터티를 그린다.
- 엔터티를 적절하게 배치한다.
- 엔터티간 관계를 설정한다.
- 관계명을 기술한다.
- 관계의 참여도를 기술한다.
- 관계의 필수여부를 기술한다.

#### 엔터티의 특징
- 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
- **유일한 식별자에 의해** 식별이 가능해야 한다.
- 영속적으로 존재하는 인스턴스의 집합이어야 한다. (한개가 아니라 두개 이상)
- 엔터티는 업무 프로세스에 의해 이용되어야 한다.
- 엔터티는 반드시 속성이 있어야 한다.
- 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 있어야한다.

#### 엔터티, 인스턴스, 속성, 속성값의 관계
- 한 개의 엔터티는 두 개 이상의 인스턴스의 집합이어야 한다.
- 한 개의 엔터티는 두 개 이상의 속성을 갖는다.
- 한 개의 속성은 한 개의 속성값을 갖는다.

#### 속성
- 특성에 따른 분류
  - 기본속성
  - 설계속성
  - 파생속성

    > 각 속성은 가질 수 있는 값의 범위가 있는데 이를 그 속성의 `도메인Domain`이라하며, 엔터티 내에서 속성에 대한 데이터타입과 크기 그리고 제약사항을 지정하는 것이다.

- 속성의 명칭 부여
  - 해당 업무에서 사용하는 이름을 부여한다.
  - 서술식 속성명은 사용하지 않는다.
  - 약어사용은 가급적 제한한다.
  - 전체 데이터모델에서 유일성 확보하는 것이 좋다.

    > ERD에서는 존재적 관계와 행위에 의한 관계를 구분하지 않지만 클래스다이어그램에서는 이것을 구분하여 연관관계와 의존관계로 표현한다.

#### 관계
- 표기법
  - 관계명: 관계의 이름
  - 관계차수: 1:1, 1:M, M:1
  - 관계선: 필수관계, 선택관계

- 관계의 읽기
  - 기준Source 엔터티를 한 개One 또는 각Each으로 읽는다.
  - 대상Target 엔터티의 관계참여도 즉 개수(하나, 하나 이상)를 읽는다.
  - 관계선택사양과 관계명을 읽는다.

#### 식별자의 종류
- 엔터티 내에서 `대표성`을 가지는가에 따라 주식별자Primary Identifier와 보조식별자Alternate Identifier로 구분
- 엔터티 내에서 `스스로 생성되었는지 여부`에 따라 내부식별자와 외부식별자Foreign Identifier로 구분
- `단일 속성`으로 식별이 되는가에 따라 단일식별자Single Identifier와 복합식별자Composit Identifier로 구분
- `원래` 업무적으로 의미가 있던 식별자 속성을 대체하여 일련번호와 같이 새롭게 만든 식별자를 구분하기 위해 본질식별자와 인조식별자로 구분

<img src="https://i.imgur.com/ir79Xl8.jpg" >

- 주식별자의 특징
  - 유일성: 주식별자에 의해 엔터티내에 모든 인스턴스들을 유일하게 구분함
  - 최소성: 주식별자를 구분하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함
  - 분별성: 주식별자가 한 번 특정 엔터티에 지정되면 그 식별자의 값은 변하지 않아야 함
  - 존재성: 주식별자가 지정되면 반드시 데이터 값이 존재(Null이 안됨)

<img src="https://i.imgur.com/9VPsjTm.jpg">

### 데이터 모델과 성능

#### 성능데이터모델링이란?
> `데이터베이스 성능향상`을 목적으로
> <u>설계단계의 데이터 모델링 때부터 성능과 관련된 사항</u>이 데이터 모델링에 반영될 수 있도록 하는 것.

- 절차
    - 데이터모델링을 할 때 정규화를 정확히 수행한다.
    - 데이터베이스 용량산정을 수행한다.
    - 데이터베이스에 발생되는 트랜잭션의 유형을 파악한다.
    - 용량과 트랜잭션의 유형에 따라 반정규화를 수행한다.
    - 이력모델의 조정, PK/FK조정, 슈퍼타입/서브타입 조정 등을 수행한다.
    - 성능관점에서 데이터모델을 검증한다.

- 정규화
    - 정규화: 다양한 유형의 데이터 값 검사를 통해 데이터 모델을 더 구조화시키고 개선시켜 나가는 절차에 관련된 이론
    - 정규형: 정규화가 프로세스를 나타내는 의미라면 정규형은 정규화가 완성된 이후의 엔티티 타입(테이블)을 지칭하는 용어
    - 함수종속성: 정규화를 이해하려면 반드시 이해해야하는 개념. 데이터들이 어떤 기준 값에 의해 종속되는 현상을 지칭. 이 때 기준값을 결정자라 하고 종속되는 값을 종속자/의존자라고 한다.
      <small>ex: 주민등록번호가 이름, 출생지, 호주를 함수적으로 결정한다.</small>
  > 정규화의 궁극적인 목적<br>
  > 반복적인 데이터를 분리하고 각 데이터가 종속된 테이블에 적절하게(프로세스에 의해 데이터의 정합성이 지켜질 수 있어야 함) 배치되도록 하는 것<br>
  > 함수의 종속성을 이용하여 정규화 작업이나 각 오브젝트에 속성을 배치하는 작업을 한다
    - 정규화 종류
        - 1차 정규화: 복수의 속성 값을 갖는 속성을 분리(로우단위의 중복, 컬럼단위의 중복 등)
        - 2차 정규화: 주식별자에 종속적이지 않은 속성의 분리, 부분 종속 속성을 분리
        - 3차 정규화: 속성에 종속적인 속성의 분리, 이전 종속 속성의 분리
        - 보이스-코드 정규화: 다수의 주식별자 분리
        - 4차 정규화: 다가 종속 속성 분리
        - 5차 정규화: 결합 종속일 경우는 두 개 이상의 N개로 분리
- 반정규화
    - 반정규화는 정규화된 엔터티, 속성, 관계에 대해 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링읙 기법을 의미한다. 반정규화는 데이터를 중복하여 성능을 향상시키기 위한 기법이라고 정의할 수 있고 좀 더 넓은 의미의 반정규화는 성능을 향상시키기 위해 정규화된 데이터 모델에서 중복, 통합,, 분리 등을 수행하는 모든 과정을 의미한다. 데이터 무결성이 깨질 수 있는 위험을 무릎쓰고 데이터를 중복하여 반정규화를 적용하는 이유는 데이터를 조회할 때 디스크 I/O량이 많아서 성능이 저하되거나 경로가 너무 멀어 조인으로 인한 성능저하가 예상되거나 칼럼을 계산하여 읽을 때 성능이 저하될 것이 예상되는 경우 반정규화를 수행하게 된다.
    - 반정규화 절차
        1. 반정규화 대상조사
            - 범위처리빈도수 조사
            - 대량의 범위 처리 조사
            - 통계성 프로세스 조사
            - 테이블 조인 개수
        2. 다른 방법유도 검토
            - 뷰 테이블
            - 클러스터링 적용
            - 인덱스의 조정
            - 응용애플리케이션
        3. 반정규화 적용
            - 테이블 반정규화
            - 속성의 반정규화
            - 관계의 반정규화
    - 반정규화의 대상에 대해 다른 방법으로 처리
        - 지나치게 많은 조인이 걸려 데이터를 조회하는 작업이 기술적으로 어려울 경우 `뷰`를 사용하면 이를 해결할 수도 있다.
        - 대량의 데이터처리나 부분처리에 의해 성능이 저하되는 경우에 `클러스터링`을 적용하거나 `인덱스를 조정`함으로써 성능을 향상시킬 수 있다.
        - 대량의 데이터는 Primary Key의 성격에 따라 부분적인 테이블로 분리할 수 있다. 즉 `파티셔닝` 기법이 적용되어 성능저하를 방지할 수 있다.
        - 응용 애플리케이션에서 로직을 구사하는 방법을 변경함으로써 성능을 향상시킬 수 있다.

<img src="https://i.imgur.com/d1WpA5A.jpg">

#### 슈퍼/서브 타입 데이터 모델

- 변환기술
    - 개별로 발생되는 트랜잭션에 대해서는 개별 테이블로 구성
    - 슈퍼타입+서브타입에 대해 발생되는 트랜잭션에 대해서는 슈퍼타입+서브타입 테이블로 구성
    - 전체를 하나로 묶어 트랜잭션이 발생할 때는 하나의 테이블로 구성

#### 인덱스 설정 기술
> PK순서를 결정하는 기준은 `인덱스 정렬구조`를 이해한 상태에서 인덱스를 효율적으로 이용할 수 있도록 PK순서를 지정해야 한다. 즉 인덱스의 특징은 여러개의 속성이 하나의 인덱스로 구성되어 있을 때 앞쪽에 위치한 속성의 값이 비교자로 잇어야 인덱스가 좋은 효율을 나타낼 수 있다. 앞쪽에 위치한 속성 값이 가급적 '=' 아니면 최소한 범위 'BETWEEN' '<>'가 들어와야 인덱스를 이용할 수 있는 것이다.

#### 분산 데이터베이스 장단점
- 장점
    - 지역 자치성, 점증적 시스템 용량 확장
    - 신뢰성과 가용성
    - 효용성과 융통성
    - 빠른 응답 속도와 통신비용 절감
    - 데이터의 가용성과 신뢰성 증가
    - 시스템 규모의 적절한 조절
    - 각 지역 사용자의 요구 수용 증대
- 단점
    - 소프트웨어 개발 비용
    - 오류의 잠재성 증대
    - 처리 비용의 증대
    - 설계, 관리의 복잡성과 비용
    - 불규칙한 응답 속도
    - 통제의 어려움
    - 데이터 무결성에 대한 위협
